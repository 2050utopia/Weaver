plugins {
    id "com.bmuschko.nexus" version "2.3.1"
}

group GROUP
version VERSION

subprojects { subproj ->
    group GROUP
    version VERSION

    buildscript {
        repositories {
            mavenCentral()
            maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
        }
    }
    repositories {
        mavenCentral()
        jcenter()
        repositories {
            maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
        }
    }

    apply from: rootProject.file('gradle/dependencies.gradle')

    subproj.tasks.withType(JavaCompile) {
        sourceCompatibility = subproj.sourceCompatibility
        targetCompatibility = subproj.targetCompatibility
    }

    subproj.tasks.withType(GroovyCompile) {
        sourceCompatibility = subproj.sourceCompatibility
        targetCompatibility = subproj.targetCompatibility
    }

    if (subproj.name.startsWith("test-")) {
        buildscript {
            dependencies {
                classpath deps.weaverPlugin
            }
        }
    }
}
